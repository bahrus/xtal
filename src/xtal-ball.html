<!DOCTYPE html>
<link async rel="import" href="../bower_components/polymer/polymer-element.html" onload="xtal.elements.bootstrap()">
<script>
    var xtal;
    (function (xtal) {
        var elements;
        (function (elements) {
            function bootstrap() {
                let xball = customElements.get('xtal-ball');
                if(xball) return xball;
                class XtalBall extends Polymer.Element {
                    _attachDom(dom) {
                        if (dom) {
                            return this.appendChild(dom);
                        }
                    }
                }
                customElements.define('xtal-ball', XtalBall);
                return XtalBall;
            }
            function downloadJSFilesInParallelButLoadInSequence(refs, callBack) {
                //see https://www.html5rocks.com/en/tutorials/speed/script-loading/
                const notLoadedYet = {};
                const nonNullRefs = refs.filter(ref => ref !== null);
                nonNullRefs.forEach(ref => {
                    notLoadedYet[ref.src] = true;
                });
                nonNullRefs.forEach(ref => {
                    const script = document.createElement('script');
                    script.src = ref.src;
                    script.async = false;
                    script.onload = () => {
                        //console.log(script.src + ' loaded');
                        delete notLoadedYet[script.src];
                        if (Object.keys(notLoadedYet).length === 0) {
                            if (callBack)
                                callBack();
                        }
                    };
                    document.head.appendChild(script);
                });
            }
            elements.bootstrap = bootstrap;
            elements.downloadJSFilesInParallelButLoadInSequence = downloadJSFilesInParallelButLoadInSequence;
            
        })(elements = xtal.elements || (xtal.elements = {}));
    })(xtal || (xtal = {}));
</script>